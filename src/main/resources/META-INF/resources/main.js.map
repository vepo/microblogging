{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/home-screen/home-screen.component.ts","./src/app/home-screen/home-screen.component.html","./src/app/mb-editor/mb-editor.component.ts","./src/app/mb-editor/mb-editor.component.html","./src/app/mb-timeline/mb-timeline.component.html","./src/app/mb-timeline/mb-timeline.component.ts","./src/app/mb-viewer/mb-viewer.component.ts","./src/app/mb-viewer/mb-viewer.component.html","./src/app/post.service.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomeScreenComponent } from './home-screen/home-screen.component';\nimport { MbViewerComponent } from './mb-viewer/mb-viewer.component';\n\nconst routes: Routes = [{\n  path: '',\n  title: 'Home',\n  component: HomeScreenComponent\n}, {\n  path: 'post/:id/view',\n  component: MbViewerComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.less']\n})\nexport class AppComponent {\n  title = 'microblogging';\n}\n","<h1>{{title}}</h1>\n<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HttpClientModule } from '@angular/common/http';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { MbEditorComponent } from './mb-editor/mb-editor.component';\nimport { MbTimelineComponent } from './mb-timeline/mb-timeline.component';\nimport { MbViewerComponent } from './mb-viewer/mb-viewer.component';\nimport { HomeScreenComponent } from './home-screen/home-screen.component';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    MbEditorComponent,\n    MbTimelineComponent,\n    MbViewerComponent,\n    HomeScreenComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpClientModule,\n    AppRoutingModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-home-screen',\n  templateUrl: './home-screen.component.html',\n  styleUrls: ['./home-screen.component.less']\n})\nexport class HomeScreenComponent {\n\n}\n","<app-mb-editor></app-mb-editor>\n<app-mb-timeline></app-mb-timeline>","import { Component } from '@angular/core';\nimport { PostService } from '../post.service';\n\n@Component({\n  selector: 'app-mb-editor',\n  templateUrl: './mb-editor.component.html',\n  styleUrls: ['./mb-editor.component.less']\n})\nexport class MbEditorComponent {\n  content: string = \"\";\n\n  constructor(private postService: PostService) { }\n\n  create() {\n    this.postService.create({ content: this.content })\n      .subscribe(post => {\n        console.log(\"Post created\", post);\n        this.content = \"\";\n      });\n  }\n}\n","<div class=\"editor-root\">\n    <div>\n        <div>\n            <textarea class=\"editor\" [(ngModel)]=\"content\"></textarea>\n        </div>\n    </div>\n    <div class=\"content-length\">\n        {{content.length }}\n    </div>\n    <div>\n        <div class=\"btns\">\n            <button class=\"btn-create\" (click)=\"create()\">Post</button>\n        </div>\n    </div>\n</div>","<div class=\"root\">\n    <div class=\"panel\">\n        <div *ngFor=\"let post of posts\" class=\"post\" [routerLink]=\"['post', post.id, 'view']\">\n            <div class=\"content\">\n                {{ post.content }}\n            </div>\n            <div class=\"date\">\n                {{ post.createdAt | date:'short' }}\n            </div>\n        </div>\n    </div>\n</div>","import { Component, HostListener, OnInit } from '@angular/core';\nimport { PostService } from '../post.service';\nimport { Post } from '../posts/posts.model';\n\n@Component({\n  selector: 'app-mb-timeline',\n  templateUrl: './mb-timeline.component.html',\n  styleUrls: ['./mb-timeline.component.less']\n})\nexport class MbTimelineComponent implements OnInit {\n  posts: Post[] = [];\n  hasMore: boolean = true;\n  loadingItems: boolean = false;\n  constructor(private postService: PostService) { }\n  ngOnInit(): void {\n    if (!this.loadingItems) {\n      this.loadingItems = true;\n      this.postService.getPosts()\n        .subscribe(page => {\n          this.posts.push(...page.items);\n          this.hasMore = page.items.length > 0;\n          this.loadingItems = false;\n        });\n    }\n  }\n\n  @HostListener('window:scroll', ['$event'])\n  onScroll(event: Event) {\n    if (this.hasMore && !this.loadingItems && event.target instanceof Document) {\n      var scrollTop = typeof event.target.scrollingElement?.scrollTop == 'number' ? event.target.scrollingElement.scrollTop : 0;\n      var clientHeight = typeof event.target.scrollingElement?.clientHeight == 'number' ? event.target.scrollingElement.clientHeight : 0;\n      var scrollHeight = typeof event.target.scrollingElement?.scrollHeight == 'number' ? event.target.scrollingElement.scrollHeight : 0;\n      if (scrollTop + clientHeight > 0.85 * scrollHeight) {\n        this.loadingItems = true;\n        this.postService.getPosts(this.posts.length)\n          .subscribe(page => {\n            this.posts.push(...page.items);\n            this.hasMore = page.items.length > 0;\n            this.loadingItems = false;\n          });\n      }\n    }\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\nimport { switchMap } from 'rxjs';\nimport { PostService } from '../post.service';\nimport { Post } from '../posts/posts.model';\n\n@Component({\n  selector: 'app-mb-viewer',\n  templateUrl: './mb-viewer.component.html',\n  styleUrls: ['./mb-viewer.component.less']\n})\nexport class MbViewerComponent implements OnInit {\n  post: Post = { id: 0, content: \"\", createdAt: new Date() };\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private postService: PostService) { }\n  ngOnInit(): void {\n    this.route.paramMap.pipe(switchMap((params: ParamMap) => this.postService.getPost(Number.parseInt(params.get('id')!))))\n      .subscribe(post => this.post = post);\n  }\n\n  delete(): void {\n    this.postService.delete(this.post)\n      .subscribe({\n        next: (post) => {\n          console.log(post);\n          this.router.navigate(['/']);\n        },\n        error: (error) => {\n          console.log(error);\n          this.router.navigate(['/']);\n        }\n      });\n  }\n}\n","<div class=\"post\">\n    <button class=\"btn-delete\" (click)=\"delete()\">X</button>\n    <div class=\"content\">\n        {{post.content}}\n    </div>\n    <div class=\"date\">\n        {{ post.createdAt | date:'short' }}\n    </div>\n</div>","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { CreatePostRequest, Post } from './posts/posts.model';\nimport { Observable } from 'rxjs';\nimport { Pagging } from './posts/pagging.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PostService {\n\n  constructor(private http: HttpClient) { }\n\n  create(request: CreatePostRequest): Observable<Post> {\n    return this.http.post<Post>(\"/api/post\", request);\n  }\n\n  getPosts(offset: number = 0): Observable<Pagging<Post>> {\n    console.log(\"Loading page\", `page: ${Math.ceil(offset / 15)}`, `offset: ${offset}`);\n    return this.http.get<Pagging<Post>>(\"/api/post/stream\", {\n      params: {\n        pageSize: 15,\n        page: Math.ceil(offset / 15)\n      }\n    });\n  }\n\n  getPost(postId: number): Observable<Post> {\n    return this.http.get<Post>(`/api/post/${postId}`);\n  }\n\n\n  delete(post: Post): Observable<Post> {\n    return this.http.delete<Post>(`/api/post/${post.id}`);\n  }\n}\n","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\n\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":["RouterModule","HomeScreenComponent","MbViewerComponent","routes","path","title","component","AppRoutingModule","forRoot","imports","exports","AppComponent","constructor","selectors","decls","vars","template","i0","BrowserModule","HttpClientModule","MbEditorComponent","MbTimelineComponent","FormsModule","AppModule","bootstrap","declarations","postService","create","content","subscribe","post","console","log","consts","ctx","ngOnInit","loadingItems","getPosts","page","posts","push","items","hasMore","length","onScroll","event","target","Document","scrollTop","scrollingElement","clientHeight","scrollHeight","hostBindings","switchMap","route","router","id","createdAt","Date","paramMap","pipe","params","getPost","Number","parseInt","get","delete","next","navigate","error","HttpClient","PostService","http","request","offset","Math","ceil","pageSize","postId","factory","providedIn","__NgCli_bootstrap_1","bootstrapModule","catch","err"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}